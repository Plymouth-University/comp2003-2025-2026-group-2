{
	"openapi": "3.1.0",
	"info": { "title": "back-end", "description": "", "license": { "name": "" }, "version": "0.1.0" },
	"paths": {
		"/auth/company/members": {
			"get": {
				"tags": ["Company Management"],
				"operationId": "get_company_members",
				"responses": {
					"200": {
						"description": "Company members retrieved successfully",
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": { "$ref": "#/components/schemas/GetCompanyMembersResponse" }
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/auth/invitations/accept": {
			"post": {
				"tags": ["Invitations"],
				"operationId": "accept_invitation",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/AcceptInvitationRequest" }
						}
					},
					"required": true
				},
				"responses": {
					"201": {
						"description": "Invitation accepted successfully",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/AuthResponse" } }
						}
					},
					"400": {
						"description": "Invalid request data",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Invalid or expired invitation token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"429": {
						"description": "Rate limit exceeded",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				}
			}
		},
		"/auth/invitations/details": {
			"get": {
				"tags": ["Invitations"],
				"operationId": "get_invitation_details",
				"parameters": [
					{
						"name": "token",
						"in": "path",
						"description": "Invitation token to retrieve details for",
						"required": true,
						"example": "invitation_token_123"
					}
				],
				"responses": {
					"200": {
						"description": "Invitation details retrieved successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/GetInvitationDetailsResponse" }
							}
						}
					},
					"404": {
						"description": "Invitation not found",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				}
			}
		},
		"/auth/invitations/send": {
			"post": {
				"tags": ["Invitations"],
				"operationId": "invite_user",
				"requestBody": {
					"content": {
						"application/json": { "schema": { "$ref": "#/components/schemas/InviteUserRequest" } }
					},
					"required": true
				},
				"responses": {
					"201": {
						"description": "Invitation sent successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/InvitationResponse" }
							}
						}
					},
					"400": {
						"description": "Invalid request data",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Unauthorized - invalid or missing token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"409": {
						"description": "User already invited or exists",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"429": {
						"description": "Rate limit exceeded",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/auth/login": {
			"post": {
				"tags": ["Authentication"],
				"operationId": "login",
				"requestBody": {
					"content": {
						"application/json": { "schema": { "$ref": "#/components/schemas/LoginRequest" } }
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Login successful",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/AuthResponse" } }
						}
					},
					"400": {
						"description": "Invalid request data",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Invalid credentials",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"429": {
						"description": "Rate limit exceeded",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				}
			}
		},
		"/auth/me": {
			"get": {
				"tags": ["Authentication"],
				"operationId": "get_current_user",
				"responses": {
					"200": {
						"description": "Current user information",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/UserResponse" } }
						}
					},
					"401": {
						"description": "Unauthorized - invalid or missing token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"404": {
						"description": "User not found",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/auth/password/request-reset": {
			"post": {
				"tags": ["Authentication"],
				"operationId": "request_password_reset",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/RequestPasswordResetRequest" }
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Password reset email sent",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/PasswordResetResponse" }
							}
						}
					},
					"404": {
						"description": "User not found",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				}
			}
		},
		"/auth/password/reset": {
			"post": {
				"tags": ["Authentication"],
				"operationId": "reset_password",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/ResetPasswordRequest" }
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Password reset successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/PasswordResetResponse" }
							}
						}
					},
					"400": {
						"description": "Password validation failed",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Invalid or expired token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				}
			}
		},
		"/auth/profile": {
			"put": {
				"tags": ["Authentication"],
				"operationId": "update_profile",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/UpdateProfileRequest" }
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Profile updated successfully",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/UserResponse" } }
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/auth/register": {
			"post": {
				"tags": ["Authentication"],
				"operationId": "register_company_admin",
				"requestBody": {
					"content": {
						"application/json": { "schema": { "$ref": "#/components/schemas/RegisterRequest" } }
					},
					"required": true
				},
				"responses": {
					"201": {
						"description": "Company admin registered successfully",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/AuthResponse" } }
						}
					},
					"400": {
						"description": "Invalid request data",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"409": {
						"description": "Email already exists",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"429": {
						"description": "Rate limit exceeded",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				}
			}
		},
		"/auth/verify": {
			"post": {
				"tags": ["Authentication"],
				"operationId": "verify_token",
				"requestBody": {
					"content": {
						"application/json": { "schema": { "$ref": "#/components/schemas/VerifyTokenRequest" } }
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Token is valid",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/JwtVerifyResponse" } }
						}
					},
					"401": {
						"description": "Invalid or expired token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"404": {
						"description": "User not found",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				}
			}
		},
		"/logs/templates": {
			"get": {
				"tags": ["Templates"],
				"operationId": "get_template",
				"parameters": [
					{
						"name": "template_name",
						"in": "path",
						"description": "Name of the template to retrieve",
						"required": true,
						"example": "ErrorLog"
					}
				],
				"responses": {
					"200": {
						"description": "Password reset successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/GetTemplateResponse" }
							}
						}
					},
					"400": {
						"description": "Password validation failed",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Invalid or expired token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			},
			"post": {
				"tags": ["Templates"],
				"operationId": "add_template",
				"requestBody": {
					"content": {
						"application/json": { "schema": { "$ref": "#/components/schemas/AddTemplateRequest" } }
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Template added successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/AddTemplateResponse" }
							}
						}
					},
					"400": {
						"description": "Password validation failed",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Invalid or expired token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		}
	},
	"components": {
		"schemas": {
			"AcceptInvitationRequest": {
				"type": "object",
				"required": ["token", "first_name", "last_name", "password"],
				"properties": {
					"first_name": { "type": "string", "example": "Alice" },
					"last_name": { "type": "string", "example": "Smith" },
					"password": { "type": "string", "example": "MemberPass123!" },
					"token": { "type": "string", "example": "invitation-token-here" }
				}
			},
			"AddTemplateRequest": {
				"type": "object",
				"required": ["template_name", "template_layout"],
				"properties": {
					"template_layout": { "$ref": "#/components/schemas/Vec" },
					"template_name": { "type": "string", "example": "Kitchen Daily Log" }
				}
			},
			"AddTemplateResponse": {
				"type": "object",
				"required": ["message"],
				"properties": { "message": { "type": "string" } }
			},
			"AddTokenResponse": {
				"type": "object",
				"required": ["message"],
				"properties": { "message": { "type": "string" } }
			},
			"AuthResponse": {
				"type": "object",
				"required": ["token", "user"],
				"properties": {
					"token": { "type": "string" },
					"user": { "$ref": "#/components/schemas/UserResponse" }
				}
			},
			"ErrorResponse": {
				"type": "object",
				"required": ["error"],
				"properties": { "error": { "type": "string" } }
			},
			"GetCompanyMembersResponse": {
				"type": "object",
				"required": ["members"],
				"properties": {
					"members": { "type": "array", "items": { "$ref": "#/components/schemas/UserResponse" } }
				}
			},
			"GetInvitationDetailsRequest": {
				"type": "object",
				"required": ["token"],
				"properties": { "token": { "type": "string", "example": "invitation-token-here" } }
			},
			"GetInvitationDetailsResponse": {
				"type": "object",
				"required": ["company_name", "expires_at"],
				"properties": { "company_name": { "type": "string" }, "expires_at": { "type": "string" } }
			},
			"GetTemplateRequest": {
				"type": "object",
				"required": ["template_name"],
				"properties": { "template_name": { "type": "string", "example": "Kitchen Daily Log" } }
			},
			"GetTemplateResponse": {
				"type": "object",
				"required": ["template_name", "template_layout"],
				"properties": {
					"template_layout": { "$ref": "#/components/schemas/Vec" },
					"template_name": { "type": "string" }
				}
			},
			"InvitationResponse": {
				"type": "object",
				"required": ["id", "email", "expires_at"],
				"properties": {
					"email": { "type": "string" },
					"expires_at": { "type": "string" },
					"id": { "type": "string" }
				}
			},
			"InviteUserRequest": {
				"type": "object",
				"required": ["email"],
				"properties": { "email": { "type": "string", "example": "newmember@example.com" } }
			},
			"JwtVerifyResponse": {
				"type": "object",
				"required": ["email"],
				"properties": { "email": { "type": "string" } }
			},
			"LoginRequest": {
				"type": "object",
				"required": ["email", "password"],
				"properties": {
					"email": { "type": "string", "example": "admin@example.com" },
					"password": { "type": "string", "example": "SecurePass123!" }
				}
			},
			"PasswordResetResponse": {
				"type": "object",
				"required": ["message"],
				"properties": { "message": { "type": "string" } }
			},
			"Position": {
				"type": "object",
				"required": ["x", "y"],
				"properties": {
					"x": { "type": "number", "format": "double" },
					"y": { "type": "number", "format": "double" }
				}
			},
			"RegisterRequest": {
				"type": "object",
				"required": [
					"email",
					"first_name",
					"last_name",
					"password",
					"company_name",
					"company_address"
				],
				"properties": {
					"company_address": { "type": "string", "example": "123 Main St, City, Country" },
					"company_name": { "type": "string", "example": "Example Corp" },
					"email": { "type": "string", "example": "admin@example.com" },
					"first_name": { "type": "string", "example": "John" },
					"last_name": { "type": "string", "example": "Doe" },
					"password": { "type": "string", "example": "SecurePass123!" }
				}
			},
			"RequestPasswordResetRequest": {
				"type": "object",
				"required": ["email"],
				"properties": { "email": { "type": "string", "example": "user@example.com" } }
			},
			"ResetPasswordRequest": {
				"type": "object",
				"required": ["token", "new_password"],
				"properties": {
					"new_password": { "type": "string", "example": "NewPassword123!" },
					"token": { "type": "string", "example": "reset-token-here" }
				}
			},
			"TemplateDocument": {
				"type": "object",
				"required": ["template_name", "template_layout", "company_id"],
				"properties": {
					"company_id": { "type": "string" },
					"template_layout": { "$ref": "#/components/schemas/Vec" },
					"template_name": { "type": "string" }
				}
			},
			"TemplateField": {
				"type": "object",
				"required": ["name", "field_type", "required", "position"],
				"properties": {
					"field_type": { "type": "string" },
					"label": { "type": ["string", "null"] },
					"name": { "type": "string" },
					"placeholder": { "type": ["string", "null"] },
					"position": { "$ref": "#/components/schemas/Position" },
					"required": { "type": "boolean" }
				}
			},
			"UpdateProfileRequest": {
				"type": "object",
				"required": ["first_name", "last_name"],
				"properties": {
					"first_name": { "type": "string", "example": "John" },
					"last_name": { "type": "string", "example": "Doe" }
				}
			},
			"UserResponse": {
				"type": "object",
				"required": ["email", "first_name", "last_name", "role"],
				"properties": {
					"company_name": { "type": ["string", "null"] },
					"email": { "type": "string" },
					"first_name": { "type": "string" },
					"last_name": { "type": "string" },
					"role": { "type": "string" }
				}
			},
			"Vec": {
				"type": "array",
				"items": {
					"type": "object",
					"required": ["name", "field_type", "required", "position"],
					"properties": {
						"field_type": { "type": "string" },
						"label": { "type": ["string", "null"] },
						"name": { "type": "string" },
						"placeholder": { "type": ["string", "null"] },
						"position": { "$ref": "#/components/schemas/Position" },
						"required": { "type": "boolean" }
					}
				}
			},
			"VerifyTokenRequest": {
				"type": "object",
				"required": ["token"],
				"properties": { "token": { "type": "string", "example": "jwt-token-here" } }
			}
		},
		"securitySchemes": { "bearer_auth": { "type": "http", "scheme": "bearer" } }
	},
	"tags": [
		{ "name": "Authentication", "description": "User authentication and registration endpoints" },
		{ "name": "Invitations", "description": "Company member invitation management" },
		{ "name": "Templates", "description": "Template1 management" },
		{ "name": "Company Management", "description": "Company member management" }
	]
}
