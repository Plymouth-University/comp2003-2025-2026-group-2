{
	"openapi": "3.1.0",
	"info": { "title": "back-end", "description": "", "license": { "name": "" }, "version": "1.1.0" },
	"paths": {
		"/auth/admin/remove-member": {
			"delete": {
				"tags": ["Company Management"],
				"summary": "Deletes a company member (admin only).",
				"description": "# Errors\nReturns an error if the user is not an admin or if the deletion fails.",
				"operationId": "admin_delete_member",
				"requestBody": {
					"content": {
						"application/json": { "schema": { "$ref": "#/components/schemas/RemoveMemberRequest" } }
					},
					"required": true
				},
				"responses": {
					"200": { "description": "Member deleted successfully" },
					"400": {
						"description": "Invalid request",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"403": {
						"description": "Forbidden - not an admin or different company",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"404": {
						"description": "User not found",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/auth/admin/update-member": {
			"put": {
				"tags": ["Company Management"],
				"summary": "Updates a company member's profile (admin only).",
				"description": "# Errors\nReturns an error if the user is not an admin, the request is invalid, or the update fails.",
				"operationId": "admin_update_member_profile",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/AdminUpdateMemberRequest" }
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Member profile updated successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/GetCompanyMembersResponse" }
							}
						}
					},
					"400": {
						"description": "Invalid request",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"403": {
						"description": "Forbidden - not an admin or different company",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"404": {
						"description": "User not found",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/auth/company/members": {
			"get": {
				"tags": ["Company Management"],
				"summary": "Retrieves all members belonging to the current user's company.",
				"description": "# Errors\nReturns an error if the user is not associated with a company or if the database query fails.",
				"operationId": "get_company_members",
				"responses": {
					"200": {
						"description": "Company members retrieved successfully",
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": { "$ref": "#/components/schemas/GetCompanyMembersResponse" }
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/auth/google/callback": {
			"get": {
				"tags": ["Authentication"],
				"summary": "Handles the callback from Google after the user has authorized the application.",
				"description": "# Errors\nReturns an error if the state is invalid, code exchange fails, or user creation fails.",
				"operationId": "google_callback",
				"parameters": [
					{
						"name": "code",
						"in": "query",
						"description": "Authorization code from Google",
						"required": true,
						"schema": { "type": "string" }
					},
					{
						"name": "state",
						"in": "query",
						"description": "CSRF state token",
						"required": true,
						"schema": { "type": "string" }
					}
				],
				"responses": {
					"302": { "description": "Redirect to dashboard on success or login on error" },
					"400": {
						"description": "Invalid request",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Authentication failed",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				}
			}
		},
		"/auth/google/initiate": {
			"get": {
				"tags": ["Authentication"],
				"summary": "Initiates the Google OAuth login flow by redirecting the user to Google.",
				"description": "# Errors\nReturns an error if OAuth is not configured or if URL generation fails.",
				"operationId": "initiate_google_login",
				"parameters": [
					{
						"name": "mode",
						"in": "query",
						"description": "OAuth mode: 'link' or omit for login",
						"required": false,
						"schema": { "type": "string" }
					}
				],
				"responses": {
					"200": {
						"description": "OAuth flow initiated",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/OAuthInitiateResponse" }
							}
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				}
			}
		},
		"/auth/google/link": {
			"post": {
				"tags": ["Authentication"],
				"summary": "Directly links a Google account to an existing user profile using a callback code.",
				"description": "# Errors\nReturns an error if the state is invalid, code exchange fails, or linking fails.",
				"operationId": "link_google_account",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/OAuthCallbackRequest" }
						}
					},
					"required": true
				},
				"responses": {
					"200": { "description": "Google account linked successfully" },
					"400": {
						"description": "Invalid request",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"409": {
						"description": "Account already linked",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/auth/google/link/confirm": {
			"post": {
				"tags": ["Authentication"],
				"summary": "Confirms linking a Google account to an existing user profile.",
				"description": "# Errors\nReturns an error if the link token is invalid/expired or if the linking operation fails.",
				"operationId": "confirm_google_link",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/OAuthLinkConfirmRequest" }
						}
					},
					"required": true
				},
				"responses": {
					"200": { "description": "Google account linked successfully" },
					"400": {
						"description": "Invalid request",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"409": {
						"description": "Account already linked",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/auth/google/unlink": {
			"delete": {
				"tags": ["Authentication"],
				"summary": "Unlinks a Google account from the user profile.",
				"description": "# Errors\nReturns an error if the user has no password set (cannot unlink last auth method) or if unlinking fails.",
				"operationId": "unlink_google_account",
				"responses": {
					"200": { "description": "Google account unlinked successfully" },
					"400": {
						"description": "Cannot unlink - password required",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/auth/invitations/accept": {
			"post": {
				"tags": ["Invitations"],
				"summary": "Accepts an invitation and creates a new user account.",
				"description": "# Errors\nReturns an error if the token is invalid/expired, validation fails, or account creation fails.",
				"operationId": "accept_invitation",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/AcceptInvitationRequest" }
						}
					},
					"required": true
				},
				"responses": {
					"201": {
						"description": "Invitation accepted successfully",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/AuthResponse" } }
						}
					},
					"400": {
						"description": "Invalid request data",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Invalid or expired invitation token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"429": {
						"description": "Rate limit exceeded",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				}
			}
		},
		"/auth/invitations/cancel": {
			"put": {
				"tags": ["Invitations"],
				"summary": "Cancels a pending invitation.",
				"description": "# Errors\nReturns an error if the user is not authorized or if the cancellation fails.",
				"operationId": "cancel_invitation",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/CancelInvitationRequest" }
						}
					},
					"required": true
				},
				"responses": {
					"200": { "description": "Invitation cancelled successfully" },
					"400": {
						"description": "Invalid request or invitation already accepted/cancelled",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"403": {
						"description": "Forbidden - not an admin or different company",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"404": {
						"description": "Invitation not found",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/auth/invitations/details": {
			"get": {
				"tags": ["Invitations"],
				"summary": "Retrieves details of an invitation using its token.",
				"description": "# Errors\nReturns an error if the invitation is not found or if there's a database error.",
				"operationId": "get_invitation_details",
				"parameters": [
					{ "name": "token", "in": "query", "required": true, "schema": { "type": "string" } }
				],
				"responses": {
					"200": {
						"description": "Invitation details retrieved successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/GetInvitationDetailsResponse" }
							}
						}
					},
					"404": {
						"description": "Invitation not found",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				}
			}
		},
		"/auth/invitations/pending": {
			"get": {
				"tags": ["Invitations"],
				"summary": "Retrieves all pending invitations for the current user's company.",
				"description": "# Errors\nReturns an error if the user is not authorized or if the query fails.",
				"operationId": "get_pending_invitations",
				"responses": {
					"200": {
						"description": "Invitations retrieved successfully",
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": { "$ref": "#/components/schemas/InvitationResponse" }
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/auth/invitations/send": {
			"post": {
				"tags": ["Invitations"],
				"summary": "Sends an invitation to a new user.",
				"description": "# Errors\nReturns an error if the user is not authorized, the email is invalid, or the invitation fails to send.",
				"operationId": "invite_user",
				"requestBody": {
					"content": {
						"application/json": { "schema": { "$ref": "#/components/schemas/InviteUserRequest" } }
					},
					"required": true
				},
				"responses": {
					"201": {
						"description": "Invitation sent successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/InvitationResponse" }
							}
						}
					},
					"400": {
						"description": "Invalid request data",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Unauthorized - invalid or missing token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"409": {
						"description": "User already invited or exists",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"429": {
						"description": "Rate limit exceeded",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/auth/login": {
			"post": {
				"tags": ["Authentication"],
				"summary": "Authenticates a user and returns a JWT token.",
				"description": "# Errors\nReturns an error if credentials are invalid or if authentication fails.",
				"operationId": "login",
				"requestBody": {
					"content": {
						"application/json": { "schema": { "$ref": "#/components/schemas/LoginRequest" } }
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Login successful",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/AuthResponse" } }
						}
					},
					"400": {
						"description": "Invalid request data",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Invalid credentials",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"429": {
						"description": "Rate limit exceeded",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				}
			}
		},
		"/auth/me": {
			"get": {
				"tags": ["Authentication"],
				"summary": "Retrieves the profile information of the currently authenticated user.",
				"description": "# Errors\nReturns an error if the user is not found or if there's a database error.",
				"operationId": "get_current_user",
				"responses": {
					"200": {
						"description": "Current user information",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/UserResponse" } }
						}
					},
					"401": {
						"description": "Unauthorized - invalid or missing token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"404": {
						"description": "User not found",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/auth/password/request-reset": {
			"post": {
				"tags": ["Authentication"],
				"summary": "Initiates a password reset process by sending an email.",
				"description": "# Errors\nReturns an error if the email is invalid or the request fails.",
				"operationId": "request_password_reset",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/RequestPasswordResetRequest" }
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Password reset email sent",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/PasswordResetResponse" }
							}
						}
					},
					"400": {
						"description": "Invalid email",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				}
			}
		},
		"/auth/password/reset": {
			"post": {
				"tags": ["Authentication"],
				"summary": "Resets a user's password using a valid reset token.",
				"description": "# Errors\nReturns an error if the token is invalid/expired or the operation fails.",
				"operationId": "reset_password",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/ResetPasswordRequest" }
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Password reset successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/PasswordResetResponse" }
							}
						}
					},
					"400": {
						"description": "Password validation failed",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Invalid or expired token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				}
			}
		},
		"/auth/profile": {
			"put": {
				"tags": ["Authentication"],
				"summary": "Updates the profile information of the currently authenticated user.",
				"description": "# Errors\nReturns an error if validation fails or the update operation fails.",
				"operationId": "update_profile",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/UpdateProfileRequest" }
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Profile updated successfully",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/UserResponse" } }
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/auth/register": {
			"post": {
				"tags": ["Authentication"],
				"summary": "Registers a new company and its administrative user.",
				"description": "# Errors\nReturns an error if validation fails, the email already exists, or registration fails.",
				"operationId": "register_company_admin",
				"requestBody": {
					"content": {
						"application/json": { "schema": { "$ref": "#/components/schemas/RegisterRequest" } }
					},
					"required": true
				},
				"responses": {
					"201": {
						"description": "Company admin registered successfully",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/AuthResponse" } }
						}
					},
					"400": {
						"description": "Invalid request data",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"409": {
						"description": "Email already exists",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"429": {
						"description": "Rate limit exceeded",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				}
			}
		},
		"/auth/verify": {
			"post": {
				"tags": ["Authentication"],
				"summary": "Verifies the validity of a JWT token.",
				"description": "# Errors\nReturns an error if the token is invalid, expired, or if there's a database error.",
				"operationId": "verify_token",
				"requestBody": {
					"content": {
						"application/json": { "schema": { "$ref": "#/components/schemas/VerifyTokenRequest" } }
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Token is valid",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/JwtVerifyResponse" } }
						}
					},
					"401": {
						"description": "Invalid or expired token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"404": {
						"description": "User not found",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				}
			}
		},
		"/health/database": {
			"get": {
				"tags": ["Health Monitoring"],
				"operationId": "get_db_health",
				"responses": {
					"200": {
						"description": "Database health metrics retrieved successfully",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/HealthResponse" } }
						}
					},
					"401": { "description": "Unauthorized" },
					"403": { "description": "Forbidden - LogSmart admin only" },
					"500": { "description": "Server error" }
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/health/index-usage": {
			"get": {
				"tags": ["Health Monitoring"],
				"operationId": "get_db_index_usage",
				"responses": {
					"200": {
						"description": "Index usage statistics retrieved successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/IndexUsageResponse" }
							}
						}
					},
					"401": { "description": "Unauthorized" },
					"403": { "description": "Forbidden - LogSmart admin only" },
					"500": { "description": "Server error" }
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/health/slow-queries": {
			"get": {
				"tags": ["Health Monitoring"],
				"operationId": "get_db_slow_queries",
				"parameters": [
					{
						"name": "limit",
						"in": "query",
						"description": "Maximum number of slow queries to return (default: 20)",
						"required": false,
						"schema": { "type": "integer", "format": "int64" }
					}
				],
				"responses": {
					"200": {
						"description": "Slow queries retrieved successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/SlowQueriesResponse" }
							}
						}
					},
					"401": { "description": "Unauthorized" },
					"403": { "description": "Forbidden - LogSmart admin only" },
					"500": { "description": "Server error" }
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/health/table-sizes": {
			"get": {
				"tags": ["Health Monitoring"],
				"operationId": "get_db_table_sizes",
				"responses": {
					"200": {
						"description": "Table sizes retrieved successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/TableSizesResponse" }
							}
						}
					},
					"401": { "description": "Unauthorized" },
					"403": { "description": "Forbidden - LogSmart admin only" },
					"500": { "description": "Server error" }
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/llm/generate-layout": {
			"post": {
				"tags": ["LLM"],
				"summary": "Generates a log layout using LLM based on user prompt.",
				"description": "# Errors\nReturns an error if the user prompt is empty or if LLM generation fails.",
				"operationId": "generate_layout",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/LayoutGenerationRequest" }
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Layout generated successfully",
						"content": { "application/json": { "schema": {} } }
					},
					"400": { "description": "Invalid request" },
					"500": { "description": "Internal server error" }
				},
				"security": [{ "bearer_token": [] }]
			}
		},
		"/logs/entries": {
			"get": {
				"tags": ["Log Entries"],
				"summary": "Lists all log entries for the current user, optionally filtered by template or status.",
				"description": "# Errors\nReturns an error if the user is not authorized or if the query fails.",
				"operationId": "list_user_log_entries",
				"responses": {
					"200": {
						"description": "User log entries retrieved successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/ListLogEntriesResponse" }
							}
						}
					},
					"401": {
						"description": "Unauthorized - invalid or missing token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			},
			"post": {
				"tags": ["Log Entries"],
				"summary": "Creates a new log entry draft.",
				"description": "# Errors\nReturns an error if the template name is empty or if entry creation fails.",
				"operationId": "create_log_entry",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/CreateLogEntryRequest" }
						}
					},
					"required": true
				},
				"responses": {
					"201": {
						"description": "Log entry created successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/CreateLogEntryResponse" }
							}
						}
					},
					"400": {
						"description": "Invalid request data",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Unauthorized - invalid or missing token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"404": {
						"description": "Template not found",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/logs/entries/:entry_id": {
			"get": {
				"tags": ["Log Entries"],
				"summary": "Retrieves a specific log entry by its ID.",
				"description": "# Errors\nReturns an error if the entry is not found or if the user is not authorized.",
				"operationId": "get_log_entry",
				"responses": {
					"200": {
						"description": "Log entry retrieved successfully",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/LogEntryResponse" } }
						}
					},
					"401": {
						"description": "Unauthorized - invalid or missing token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"403": {
						"description": "Forbidden - entry does not belong to user",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"404": {
						"description": "Entry not found",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			},
			"put": {
				"tags": ["Log Entries"],
				"summary": "Updates the data of an existing log entry draft.",
				"description": "# Errors\nReturns an error if the entry is not found or if the update fails.",
				"operationId": "update_log_entry",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/UpdateLogEntryRequest" }
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Log entry updated successfully",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/LogEntryResponse" } }
						}
					},
					"401": {
						"description": "Unauthorized - invalid or missing token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"403": {
						"description": "Forbidden - entry does not belong to user",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"404": {
						"description": "Entry not found",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			},
			"delete": {
				"tags": ["Log Entries"],
				"summary": "Deletes a log entry.",
				"description": "# Errors\nReturns an error if the user is not authorized or if deletion fails.",
				"operationId": "delete_log_entry",
				"responses": {
					"200": {
						"description": "Log entry deleted successfully",
						"content": { "application/json": { "schema": {} } }
					},
					"401": {
						"description": "Unauthorized - invalid or missing token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"403": {
						"description": "Forbidden - entry does not belong to user",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"404": {
						"description": "Entry not found",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/logs/entries/:entry_id/submit": {
			"post": {
				"tags": ["Log Entries"],
				"summary": "Submits a log entry, marking it as final.",
				"description": "# Errors\nReturns an error if the entry is not found or if submission fails.",
				"operationId": "submit_log_entry",
				"responses": {
					"200": {
						"description": "Log entry submitted successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/SubmitLogEntryResponse" }
							}
						}
					},
					"401": {
						"description": "Unauthorized - invalid or missing token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"403": {
						"description": "Forbidden - entry does not belong to user",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"404": {
						"description": "Entry not found",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/logs/entries/:entry_id/unsubmit": {
			"post": {
				"tags": ["Log Entries"],
				"summary": "Returns a submitted log entry to draft status (admin only).",
				"description": "# Errors\nReturns an error if the entry is not found or if the operation fails.",
				"operationId": "unsubmit_log_entry",
				"responses": {
					"200": {
						"description": "Log entry returned to draft successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/SubmitLogEntryResponse" }
							}
						}
					},
					"401": {
						"description": "Unauthorized - invalid or missing token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"403": {
						"description": "Forbidden - only admins can unsubmit entries",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"404": {
						"description": "Entry not found",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/logs/entries/due": {
			"get": {
				"tags": ["Log Entries"],
				"summary": "Lists all log forms that are due today for the current user's company.",
				"description": "# Errors\nReturns an error if the user is not authorized or if the query fails.",
				"operationId": "list_due_forms_today",
				"responses": {
					"200": {
						"description": "Due forms retrieved successfully",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/DueFormsResponse" } }
						}
					},
					"401": {
						"description": "Unauthorized - invalid or missing token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/logs/templates": {
			"get": {
				"tags": ["Templates"],
				"summary": "Retrieves a specific log template by name.",
				"description": "# Errors\nReturns an error if the template is not found or if the user is not authorized.",
				"operationId": "get_template",
				"parameters": [
					{
						"name": "template_name",
						"in": "path",
						"description": "Name of the template to retrieve",
						"required": true,
						"example": "ErrorLog"
					}
				],
				"responses": {
					"200": {
						"description": "Password reset successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/GetTemplateResponse" }
							}
						}
					},
					"400": {
						"description": "Password validation failed",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Invalid or expired token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			},
			"post": {
				"tags": ["Templates"],
				"summary": "Adds a new log template for the current company.",
				"description": "# Errors\nReturns an error if the user is not authorized or if template creation fails.",
				"operationId": "add_template",
				"requestBody": {
					"content": {
						"application/json": { "schema": { "$ref": "#/components/schemas/AddTemplateRequest" } }
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Template added successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/AddTemplateResponse" }
							}
						}
					},
					"400": {
						"description": "Password validation failed",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Invalid or expired token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			},
			"delete": {
				"tags": ["Templates"],
				"summary": "Deletes a specific log template.",
				"description": "# Errors\nReturns an error if the user is not authorized or if deletion fails.",
				"operationId": "delete_template",
				"parameters": [
					{
						"name": "template_name",
						"in": "query",
						"required": true,
						"schema": { "type": "string" }
					}
				],
				"responses": {
					"200": {
						"description": "Template deleted successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/DeleteTemplateResponse" }
							}
						}
					},
					"400": {
						"description": "Password validation failed",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Invalid or expired token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/logs/templates/all": {
			"get": {
				"tags": ["Templates"],
				"summary": "Retrieves all log templates for the current company.",
				"description": "# Errors\nReturns an error if the user is not authorized or if the query fails.",
				"operationId": "get_all_templates",
				"responses": {
					"200": {
						"description": "All templates retrieved successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/GetAllTemplatesResponse" }
							}
						}
					},
					"401": {
						"description": "Invalid or expired token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/logs/templates/rename": {
			"put": {
				"tags": ["Templates"],
				"summary": "Renames an existing log template.",
				"description": "# Errors\nReturns an error if the user is not authorized or if the rename fails.",
				"operationId": "rename_template",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/RenameTemplateRequest" }
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Template renamed successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/RenameTemplateResponse" }
							}
						}
					},
					"400": {
						"description": "Password validation failed",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Invalid or expired token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/logs/templates/update": {
			"put": {
				"tags": ["Templates"],
				"summary": "Updates an existing log template.",
				"description": "# Errors\nReturns an error if the user is not authorized or if the update fails.",
				"operationId": "update_template",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/UpdateTemplateRequest" }
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Template updated successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/UpdateTemplateResponse" }
							}
						}
					},
					"400": {
						"description": "Password validation failed",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Invalid or expired token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/logs/templates/versions": {
			"get": {
				"tags": ["Templates"],
				"summary": "Retrieves the version history of a log template.",
				"description": "# Errors\nReturns an error if the user is not authorized or if query fails.",
				"operationId": "get_template_versions",
				"parameters": [
					{
						"name": "template_name",
						"in": "path",
						"description": "Name of the template to retrieve versions for",
						"required": true,
						"example": "ErrorLog"
					}
				],
				"responses": {
					"200": {
						"description": "Versions retrieved successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/GetTemplateVersionsResponse" }
							}
						}
					},
					"401": {
						"description": "Invalid or expired token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		},
		"/logs/templates/versions/restore": {
			"post": {
				"tags": ["Templates"],
				"summary": "Restores a specific version of a log template.",
				"description": "# Errors\nReturns an error if the user is not authorized or if restoration fails.",
				"operationId": "restore_template_version",
				"parameters": [
					{
						"name": "template_name",
						"in": "path",
						"description": "Name of the template to restore",
						"required": true,
						"example": "ErrorLog"
					}
				],
				"requestBody": {
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/RestoreTemplateVersionRequest" }
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Template restored successfully",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/UpdateTemplateResponse" }
							}
						}
					},
					"400": {
						"description": "Bad request",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"401": {
						"description": "Invalid or expired token",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					},
					"500": {
						"description": "Server error",
						"content": {
							"application/json": { "schema": { "$ref": "#/components/schemas/ErrorResponse" } }
						}
					}
				},
				"security": [{ "bearer_auth": [] }]
			}
		}
	},
	"components": {
		"schemas": {
			"AcceptInvitationRequest": {
				"type": "object",
				"required": ["token", "first_name", "last_name", "password"],
				"properties": {
					"first_name": { "type": "string", "example": "Alice" },
					"last_name": { "type": "string", "example": "Smith" },
					"password": { "type": "string", "example": "MemberPass123!" },
					"token": { "type": "string", "example": "invitation-token-here" }
				}
			},
			"AddTemplateRequest": {
				"type": "object",
				"required": ["template_name", "template_layout", "schedule"],
				"properties": {
					"schedule": { "$ref": "#/components/schemas/Schedule" },
					"template_layout": { "$ref": "#/components/schemas/Vec" },
					"template_name": { "type": "string", "example": "Kitchen Daily Log" }
				}
			},
			"AddTemplateResponse": {
				"type": "object",
				"required": ["message"],
				"properties": { "message": { "type": "string" } }
			},
			"AddTokenResponse": {
				"type": "object",
				"required": ["message"],
				"properties": { "message": { "type": "string" } }
			},
			"AdminUpdateMemberRequest": {
				"type": "object",
				"required": ["email", "first_name", "last_name", "role"],
				"properties": {
					"email": { "type": "string", "example": "user@example.com" },
					"first_name": { "type": "string", "example": "Jane" },
					"last_name": { "type": "string", "example": "Smith" },
					"role": { "type": "string", "example": "member" }
				}
			},
			"AuthResponse": {
				"type": "object",
				"required": ["token", "user"],
				"properties": {
					"token": { "type": "string" },
					"user": { "$ref": "#/components/schemas/UserResponse" }
				}
			},
			"CancelInvitationRequest": {
				"type": "object",
				"required": ["invitation_id"],
				"properties": { "invitation_id": { "type": "string", "example": "invitation-uuid-here" } }
			},
			"CreateLogEntryRequest": {
				"type": "object",
				"required": ["template_name"],
				"properties": { "template_name": { "type": "string", "example": "Kitchen Daily Log" } }
			},
			"CreateLogEntryResponse": {
				"type": "object",
				"required": ["id", "message"],
				"properties": { "id": { "type": "string" }, "message": { "type": "string" } }
			},
			"DatabaseHealthMetrics": {
				"type": "object",
				"required": [
					"total_connections",
					"active_connections",
					"idle_connections",
					"max_connections",
					"database_size_mb",
					"table_count",
					"index_count"
				],
				"properties": {
					"active_connections": { "type": "integer", "format": "int64" },
					"database_size_mb": { "type": "number", "format": "double" },
					"idle_connections": { "type": "integer", "format": "int64" },
					"index_count": { "type": "integer", "format": "int64" },
					"max_connections": { "type": "integer", "format": "int32" },
					"table_count": { "type": "integer", "format": "int64" },
					"total_connections": { "type": "integer", "format": "int64" }
				}
			},
			"DeleteTemplateRequest": {
				"type": "object",
				"required": ["template_name"],
				"properties": { "template_name": { "type": "string" } }
			},
			"DeleteTemplateResponse": {
				"type": "object",
				"required": ["message"],
				"properties": { "message": { "type": "string" } }
			},
			"DueFormInfo": {
				"type": "object",
				"required": ["template_name", "template_layout", "period"],
				"properties": {
					"last_submitted": { "type": ["string", "null"] },
					"period": { "type": "string" },
					"status": { "type": ["string", "null"] },
					"template_layout": { "$ref": "#/components/schemas/Vec" },
					"template_name": { "type": "string" }
				}
			},
			"DueFormsResponse": {
				"type": "object",
				"required": ["forms"],
				"properties": {
					"forms": { "type": "array", "items": { "$ref": "#/components/schemas/DueFormInfo" } }
				}
			},
			"ErrorResponse": {
				"type": "object",
				"required": ["error"],
				"properties": { "error": { "type": "string" } }
			},
			"Frequency": { "type": "string", "enum": ["Daily", "Weekly", "Monthly", "Yearly"] },
			"GetAllTemplatesResponse": {
				"type": "object",
				"required": ["templates"],
				"properties": {
					"templates": { "type": "array", "items": { "$ref": "#/components/schemas/TemplateInfo" } }
				}
			},
			"GetCompanyMembersResponse": {
				"type": "object",
				"required": ["members"],
				"properties": {
					"members": { "type": "array", "items": { "$ref": "#/components/schemas/UserResponse" } }
				}
			},
			"GetInvitationDetailsRequest": {
				"type": "object",
				"required": ["token"],
				"properties": { "token": { "type": "string", "example": "invitation-token-here" } }
			},
			"GetInvitationDetailsResponse": {
				"type": "object",
				"required": ["company_name", "expires_at"],
				"properties": {
					"company_name": { "type": "string" },
					"expires_at": { "type": "string", "format": "date-time" }
				}
			},
			"GetPendingInvitationsResponse": {
				"type": "object",
				"required": ["invitations"],
				"properties": {
					"invitations": {
						"type": "array",
						"items": { "$ref": "#/components/schemas/InvitationResponse" }
					}
				}
			},
			"GetTemplateRequest": {
				"type": "object",
				"required": ["template_name"],
				"properties": { "template_name": { "type": "string", "example": "Kitchen Daily Log" } }
			},
			"GetTemplateResponse": {
				"type": "object",
				"required": ["template_name", "template_layout", "version"],
				"properties": {
					"template_layout": { "$ref": "#/components/schemas/Vec" },
					"template_name": { "type": "string" },
					"version": { "type": "integer", "format": "int32", "minimum": 0 },
					"version_name": { "type": ["string", "null"] }
				}
			},
			"GetTemplateVersionsResponse": {
				"type": "object",
				"required": ["versions"],
				"properties": {
					"versions": {
						"type": "array",
						"items": { "$ref": "#/components/schemas/TemplateVersionInfo" }
					}
				}
			},
			"HealthResponse": {
				"type": "object",
				"required": ["status", "metrics"],
				"properties": {
					"metrics": { "$ref": "#/components/schemas/DatabaseHealthMetrics" },
					"status": { "type": "string" }
				}
			},
			"IndexUsageResponse": {
				"type": "object",
				"required": ["indexes", "unused_indexes"],
				"properties": {
					"indexes": {
						"type": "array",
						"items": { "$ref": "#/components/schemas/IndexUsageStats" }
					},
					"unused_indexes": { "type": "array", "items": { "type": "string" } }
				}
			},
			"IndexUsageStats": {
				"type": "object",
				"required": ["table_name", "index_name", "index_scans", "rows_read", "rows_fetched"],
				"properties": {
					"index_name": { "type": "string" },
					"index_scans": { "type": "integer", "format": "int64" },
					"rows_fetched": { "type": "integer", "format": "int64" },
					"rows_read": { "type": "integer", "format": "int64" },
					"table_name": { "type": "string" }
				}
			},
			"InvitationResponse": {
				"type": "object",
				"required": ["id", "email", "expires_at"],
				"properties": {
					"email": { "type": "string" },
					"expires_at": { "type": "string", "format": "date-time" },
					"id": { "type": "string" }
				}
			},
			"InviteUserRequest": {
				"type": "object",
				"required": ["email"],
				"properties": { "email": { "type": "string", "example": "newmember@example.com" } }
			},
			"JwtVerifyResponse": {
				"type": "object",
				"required": ["email"],
				"properties": { "email": { "type": "string" } }
			},
			"LayoutGenerationRequest": {
				"type": "object",
				"required": ["user_prompt"],
				"properties": { "user_prompt": { "type": "string" } }
			},
			"LayoutGenerationResponse": {
				"type": "object",
				"required": ["layout"],
				"properties": { "layout": {} }
			},
			"ListLogEntriesResponse": {
				"type": "object",
				"required": ["entries"],
				"properties": {
					"entries": {
						"type": "array",
						"items": { "$ref": "#/components/schemas/LogEntryResponse" }
					}
				}
			},
			"LogEntryResponse": {
				"type": "object",
				"required": [
					"id",
					"template_name",
					"template_layout",
					"entry_data",
					"status",
					"created_at",
					"updated_at",
					"period"
				],
				"properties": {
					"created_at": { "type": "string" },
					"entry_data": {},
					"id": { "type": "string" },
					"period": { "type": "string" },
					"status": { "type": "string" },
					"submitted_at": { "type": ["string", "null"] },
					"template_layout": { "$ref": "#/components/schemas/Vec" },
					"template_name": { "type": "string" },
					"updated_at": { "type": "string" }
				}
			},
			"LoginRequest": {
				"type": "object",
				"required": ["email", "password"],
				"properties": {
					"email": { "type": "string", "example": "admin@example.com" },
					"password": { "type": "string", "example": "SecurePass123!" }
				}
			},
			"OAuthCallbackRequest": {
				"type": "object",
				"required": ["code", "state"],
				"properties": {
					"code": { "type": "string", "example": "authorization-code-from-google" },
					"state": { "type": "string", "example": "csrf-state-token" }
				}
			},
			"OAuthInitiateResponse": {
				"type": "object",
				"required": ["authorization_url"],
				"properties": { "authorization_url": { "type": "string" } }
			},
			"OAuthLinkConfirmRequest": {
				"type": "object",
				"required": ["link_token"],
				"properties": { "link_token": { "type": "string" } }
			},
			"PasswordResetResponse": {
				"type": "object",
				"required": ["message"],
				"properties": { "message": { "type": "string" } }
			},
			"Position": {
				"type": "object",
				"required": ["x", "y"],
				"properties": {
					"x": { "type": "number", "format": "double" },
					"y": { "type": "number", "format": "double" }
				}
			},
			"RegisterRequest": {
				"type": "object",
				"required": [
					"email",
					"first_name",
					"last_name",
					"password",
					"company_name",
					"company_address"
				],
				"properties": {
					"company_address": { "type": "string", "example": "123 Main St, City, Country" },
					"company_name": { "type": "string", "example": "Example Corp" },
					"email": { "type": "string", "example": "admin@example.com" },
					"first_name": { "type": "string", "example": "John" },
					"last_name": { "type": "string", "example": "Doe" },
					"password": { "type": "string", "example": "SecurePass123!" }
				}
			},
			"RemoveMemberRequest": {
				"type": "object",
				"required": ["email"],
				"properties": { "email": { "type": "string", "example": "user@example.com" } }
			},
			"RenameTemplateRequest": {
				"type": "object",
				"required": ["old_template_name", "new_template_name"],
				"properties": {
					"new_template_name": { "type": "string" },
					"old_template_name": { "type": "string" }
				}
			},
			"RenameTemplateResponse": {
				"type": "object",
				"required": ["message"],
				"properties": { "message": { "type": "string" } }
			},
			"RequestPasswordResetRequest": {
				"type": "object",
				"required": ["email"],
				"properties": { "email": { "type": "string", "example": "user@example.com" } }
			},
			"ResetPasswordRequest": {
				"type": "object",
				"required": ["token", "new_password"],
				"properties": {
					"new_password": { "type": "string", "example": "NewPassword123!" },
					"token": { "type": "string", "example": "reset-token-here" }
				}
			},
			"RestoreTemplateVersionRequest": {
				"type": "object",
				"required": ["version"],
				"properties": { "version": { "type": "integer", "format": "int32", "minimum": 0 } }
			},
			"Schedule": {
				"type": "object",
				"required": ["frequency"],
				"properties": {
					"day_of_month": { "type": ["integer", "null"], "format": "int32", "minimum": 0 },
					"day_of_week": { "type": ["integer", "null"], "format": "int32", "minimum": 0 },
					"days_of_week": {
						"type": ["array", "null"],
						"items": { "type": "integer", "format": "int32", "minimum": 0 }
					},
					"frequency": { "$ref": "#/components/schemas/Frequency" },
					"month_of_year": { "type": ["integer", "null"], "format": "int32", "minimum": 0 }
				}
			},
			"SlowQueriesResponse": {
				"type": "object",
				"required": ["queries"],
				"properties": {
					"queries": { "type": "array", "items": { "$ref": "#/components/schemas/SlowQueryInfo" } }
				}
			},
			"SlowQueryInfo": {
				"type": "object",
				"required": ["query", "calls", "total_time_ms", "mean_time_ms", "max_time_ms"],
				"properties": {
					"calls": { "type": "integer", "format": "int64" },
					"max_time_ms": { "type": "number", "format": "double" },
					"mean_time_ms": { "type": "number", "format": "double" },
					"query": { "type": "string" },
					"total_time_ms": { "type": "number", "format": "double" }
				}
			},
			"SubmitLogEntryRequest": { "type": "object" },
			"SubmitLogEntryResponse": {
				"type": "object",
				"required": ["message"],
				"properties": { "message": { "type": "string" } }
			},
			"TableSizeInfo": {
				"type": "object",
				"required": ["table_name", "row_count", "total_size_mb", "table_size_mb", "index_size_mb"],
				"properties": {
					"index_size_mb": { "type": "number", "format": "double" },
					"row_count": { "type": "integer", "format": "int64" },
					"table_name": { "type": "string" },
					"table_size_mb": { "type": "number", "format": "double" },
					"total_size_mb": { "type": "number", "format": "double" }
				}
			},
			"TableSizesResponse": {
				"type": "object",
				"required": ["tables"],
				"properties": {
					"tables": { "type": "array", "items": { "$ref": "#/components/schemas/TableSizeInfo" } }
				}
			},
			"TemplateDocument": {
				"type": "object",
				"required": [
					"template_name",
					"template_layout",
					"company_id",
					"created_at",
					"updated_at",
					"schedule",
					"created_by"
				],
				"properties": {
					"company_id": { "type": "string" },
					"created_at": { "type": "string", "format": "date-time" },
					"created_by": { "type": "string", "format": "uuid" },
					"schedule": { "$ref": "#/components/schemas/Schedule" },
					"template_layout": { "$ref": "#/components/schemas/Vec" },
					"template_name": { "type": "string" },
					"updated_at": { "type": "string", "format": "date-time" },
					"version": { "type": "integer", "format": "int32", "minimum": 0 },
					"version_name": { "type": ["string", "null"] }
				}
			},
			"TemplateField": {
				"type": "object",
				"required": ["field_type", "position", "props"],
				"properties": {
					"field_type": { "type": "string" },
					"position": { "$ref": "#/components/schemas/Position" },
					"props": { "$ref": "#/components/schemas/TemplateFieldProps" }
				}
			},
			"TemplateFieldProps": {
				"type": "object",
				"properties": {
					"editable": { "type": ["boolean", "null"] },
					"max": { "type": ["number", "null"], "format": "float" },
					"min": { "type": ["number", "null"], "format": "float" },
					"options": { "type": ["array", "null"], "items": { "type": "string" } },
					"placeholder": { "type": ["string", "null"] },
					"selected": { "type": ["string", "null"] },
					"size": { "type": ["string", "null"] },
					"text": { "type": ["string", "null"] },
					"unit": { "type": ["string", "null"] },
					"value": { "type": ["string", "null"] },
					"weight": { "type": ["string", "null"] }
				}
			},
			"TemplateInfo": {
				"type": "object",
				"required": ["template_name", "schedule", "created_by", "created_at", "updated_at"],
				"properties": {
					"created_at": { "type": "string" },
					"created_by": { "type": "string" },
					"schedule": { "$ref": "#/components/schemas/Schedule" },
					"template_name": { "type": "string" },
					"updated_at": { "type": "string" }
				}
			},
			"TemplateVersionInfo": {
				"type": "object",
				"required": ["version", "created_at", "created_by"],
				"properties": {
					"created_at": { "type": "string" },
					"created_by": { "type": "string" },
					"version": { "type": "integer", "format": "int32", "minimum": 0 },
					"version_name": { "type": ["string", "null"] }
				}
			},
			"UpdateLogEntryRequest": {
				"type": "object",
				"required": ["entry_data"],
				"properties": { "entry_data": {} }
			},
			"UpdateProfileRequest": {
				"type": "object",
				"required": ["first_name", "last_name"],
				"properties": {
					"first_name": { "type": "string", "example": "John" },
					"last_name": { "type": "string", "example": "Doe" }
				}
			},
			"UpdateTemplateRequest": {
				"type": "object",
				"required": ["template_name"],
				"properties": {
					"schedule": {
						"oneOf": [{ "type": "null" }, { "$ref": "#/components/schemas/Schedule" }]
					},
					"template_layout": {
						"oneOf": [{ "type": "null" }, { "$ref": "#/components/schemas/Vec" }]
					},
					"template_name": { "type": "string", "example": "Kitchen Daily Log" },
					"version_name": { "type": ["string", "null"], "example": "Major Update" }
				}
			},
			"UpdateTemplateResponse": {
				"type": "object",
				"required": ["message"],
				"properties": { "message": { "type": "string" } }
			},
			"UserResponse": {
				"type": "object",
				"required": ["email", "first_name", "last_name", "role"],
				"properties": {
					"company_name": { "type": ["string", "null"] },
					"email": { "type": "string" },
					"first_name": { "type": "string" },
					"last_name": { "type": "string" },
					"oauth_provider": { "type": ["string", "null"] },
					"role": { "$ref": "#/components/schemas/UserRole" }
				}
			},
			"UserRole": { "type": "string", "enum": ["admin", "member", "logsmart_admin"] },
			"Vec": {
				"type": "array",
				"items": {
					"type": "object",
					"required": ["field_type", "position", "props"],
					"properties": {
						"field_type": { "type": "string" },
						"position": { "$ref": "#/components/schemas/Position" },
						"props": { "$ref": "#/components/schemas/TemplateFieldProps" }
					}
				}
			},
			"VerifyTokenRequest": {
				"type": "object",
				"required": ["token"],
				"properties": { "token": { "type": "string", "example": "jwt-token-here" } }
			}
		},
		"securitySchemes": { "bearer_auth": { "type": "http", "scheme": "bearer" } }
	},
	"tags": [
		{ "name": "Authentication", "description": "User authentication and registration endpoints" },
		{ "name": "Invitations", "description": "Company member invitation management" },
		{ "name": "Templates", "description": "Template management" },
		{ "name": "Company Management", "description": "Company member management" },
		{ "name": "Log Entries", "description": "Log entry management" },
		{
			"name": "Health Monitoring",
			"description": "Database health and performance monitoring (LogSmart Admin only)"
		}
	]
}
